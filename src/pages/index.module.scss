@use "global";
@use "sass:math";

.landscape {
  position: fixed;
  $width: max(100vh, 100vw);
  width: $width;
  height: calc(#{$width} * 1 / 0.7);
  pointer-events: none;

  & > * {
    position: absolute;
  }
}

.picture {
  @include global.full-area;
}

.holeEffect {
  @include global.full-area;
  animation-delay: 0s;
  animation-direction: alternate;
  animation-duration: 3s;
  animation-fill-mode: both;
  animation-iteration-count: infinite;
  animation-timing-function: ease-in-out;
  animation-play-state: running;
  animation-name: holeEffectLoop;

  @keyframes holeEffectLoop {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(1.01);
    }
  }
}

.smogEffect {
  @include global.full-area;
  background: radial-gradient(at 50% 0%, rgba(#ddd, 0.1) 0%, rgba(#ddd, 0) 30%, rgba(#ddd, 0.9) 70%);

  animation-iteration-count: infinite;
  animation-duration: 4s;
  animation-fill-mode: both;
  animation-direction: normal;
  animation-name: smogEffectLoop;

  @include global.media(phone) {
    animation-name: none;
  }

  @keyframes smogEffectLoop {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.5);
    }
    100% {
      transform: scale(1);
    }
  }
}

.windEffect {
  position: absolute;
  @include global.full-area;
  transform: scale(4);

  &.layer1 {
    left: 0;
    transform: translateX(-100%);
    animation-name: windEffectLeftLoop;
    animation-play-state: running;
    animation-timing-function: ease-out;
    animation-iteration-count: infinite;
    animation-duration: 16s;
    animation-direction: normal;
    animation-fill-mode: both;
    animation-delay: 8s;

    @include global.media(phone) {
      animation-name: none;
    }

    @keyframes windEffectLeftLoop {
      0% {
        transform: translateX(-100%) rotate3d(1, 1, -1, 70deg);
        opacity: 0;
      }
      20% {
        opacity: 1;
      }
      80% {
        opacity: 1;
      }
      100% {
        transform: translateX(0%) rotate3d(1, 1, -1, 0deg);
        opacity: 0;
      }
    }
  }

  &.layer2 {
    right: 0;
    transform: translateX(100%);
    animation-name: windEffectRightLoop;
    animation-play-state: running;
    animation-timing-function: ease-out;
    animation-iteration-count: infinite;
    animation-duration: 16s;
    animation-direction: normal;
    animation-fill-mode: both;
    animation-delay: 0s;

    @include global.media(phone) {
      animation-name: none;
    }

    @keyframes windEffectRightLoop {
      0% {
        transform: translateX(100%) rotate3d(-1, -1, 1, 70deg);
        opacity: 0;
      }
      20% {
        opacity: 1;
      }
      80% {
        opacity: 1;
      }
      100% {
        transform: translateX(0%) rotate3d(-1, -1, 1, 0deg);
        opacity: 0;
      }
    }
  }
}

.shadow {
  position: absolute;
  width: min(26%, 80vw);
  left: 49%;
  transform: translateX(-40%);
  top: 50%;

  animation-iteration-count: infinite;
  animation-duration: 800ms;
  animation-fill-mode: both;
  animation-direction: normal;
  animation-name: loop;

  .frame1 {
    animation-delay: 0ms;
  }

  .frame2 {
    animation-delay: 200ms;
  }

  .frame3 {
    animation-delay: 400ms;
  }

  .frame4 {
    animation-delay: 600ms;
  }

  @keyframes loop {
    0% {
      visibility: visible;
    }
    25% {
      visibility: hidden;
    }
    100% {
      visibility: hidden;
    }
  }
}


.container {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
  min-height: 750px;
}

.masked {
  position: relative;
  width: 50%;
  height: 50%;
  transition: opacity 500ms, transform 300ms;
  opacity: 1;
  filter: contrast(0.5);

  .hover & {
    transform: scale(0.95);
  }

  &.switching {
    opacity: 0;
  }
}

@mixin full {
  .letters {
    position: absolute;
    top: 45vh;
    right: calc(50% + max(12rem, 30vw));
    transform: translate(50%, -50%);
    transition: right 2s, top 2s, transform 2s;

    &.hidden {
      top: 35vh;
      right: calc(50% + 80vw);
      transform: translate(50%, -50%) scale(1.5);
    }
  }

  .materials {
    position: absolute;
    top: 45vh;
    left: calc(50% + max(12rem, 30vw));
    transform: translate(-50%, -50%);
    transition: left 2s, top 2s, transform 2s;

    &.hidden {
      top: 35vh;
      left: calc(50% + 80vw);
      transform: translate(-50%, -50%) scale(1.5);
    }
  }
}

@include global.media(phone) {
  .letters {
    position: absolute;
    top: 45vh;
    right: calc(50% + 1.5rem);
    opacity: 1;
    transition: opacity 1s;

    &.hidden {
      opacity: 0;
    }
  }

  .materials {
    position: absolute;
    top: 45vh;
    left: calc(50% + 1.5rem);
    opacity: 1;
    transition: opacity 1s;

    &.hidden {
      opacity: 0;
    }
  }
}

@include global.media(tablet) {
  @include full;
}

@include global.media(desktop) {
  @include full;
}


.message {
  position: relative;
  width: 100%;
  background: global.$light2;
  min-height: 50rem;
}

.content {
  height: 48rem;
  position: relative;
  display: flex;
  margin-left: auto;
  margin-right: auto;
  flex-direction: column;
  justify-content: center;
  align-content: center;

  @include global.media(phone) {
    width: calc(100vw - 3rem);
  }

  @include global.media(tablet) {
    width: calc(100vw - 8rem);
  }

  @include global.media(desktop) {
    width: 52rem;
  }
}

.title {
  @include global.design-font;
  display: inline-block;
  border-left: global.$dark1 solid 2px;
  overflow-x: visible;

  @include global.media(phone) {
    margin-bottom: 3rem;
    padding-left: 1rem;
  }

  @include global.media(tablet) {
    margin-bottom: 3rem;
    padding-left: 2rem;
  }

  @include global.media(desktop) {
    margin-bottom: 3rem;
    padding-left: 2rem;
  }

  .text {
    position: relative;
    color: global.$dark1;
    transition: opacity 0.8s ease-in-out 0s, left 0.8s ease-in-out 0s;

    &.inactive {
      opacity: 0;
      left: 2rem;
    }

    &.active {
      opacity: 1;
      left: 0;
    }

    .strong {
      font-size: 120%;
      color: #ba1317;
    }

    @include global.media(phone) {
      font-size: 1.2rem;

      .first {
        display: block;
        margin-bottom: 0.4rem;
      }

      .last {
        display: block;
        margin-left: 1em;
      }

      .strong {
        margin-left: 0.2rem;
        margin-right: 0.2rem;
      }
    }

    @include global.media(tablet) {
      font-size: 1.6rem;

      .first {
        display: block;
        margin-bottom: 0.4rem;
      }

      .last {
        display: block;
        margin-left: 1em;
      }

      .strong {
        margin-left: 0.2rem;
        margin-right: 0.2rem;
      }
    }

    @include global.media(desktop) {
      font-size: 2rem;

      .strong {
        margin-left: 0.5rem;
        margin-right: 0.5rem;
      }
    }
  }
}

.body {
  color: global.$dark1;
  display: inline-block;
  padding-left: 2rem;

  a {
    margin-inline: 0.2em;
    border-bottom: solid 1px currentColor;

    &:hover {
      border-bottom: solid 3px currentColor;
    }
  }

  p {
    display: inline-block;
    text-indent: 1em;
    margin-top: 1.5em;
  }

  @include global.media(phone) {
    padding: 0 1rem;
    font-size: 1rem;
  }

  @include global.media(tablet) {
    padding: 0 1rem;
    font-size: 1rem;
  }

  @include global.media(desktop) {
    font-size: 1rem;
  }
}

